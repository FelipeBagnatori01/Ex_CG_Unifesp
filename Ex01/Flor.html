<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>Flor</title>
  <style>
    body,html { margin:0; height:100%; background:#222; }
    canvas { width:100%; height:100%; display:block; }
  </style>
</head>
<body>
<canvas id="glcanvas"></canvas>

<script>
// ---------- Shaders ----------
const vsSource = `
attribute vec2 aPosition;
void main() {
  gl_Position = vec4(aPosition, 0.0, 1.0);
}
`;
const fsSource = `
precision mediump float;
uniform vec3 uColor;
void main() {
  gl_FragColor = vec4(uColor, 1.0);
}
`;

// ---------- Utilitários ----------
function createShader(gl, type, source) {
  const shader = gl.createShader(type);
  gl.shaderSource(shader, source);
  gl.compileShader(shader);
  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
    console.error(gl.getShaderInfoLog(shader));
  }
  return shader;
}
function createProgram(gl, vsSource, fsSource) {
  const vs = createShader(gl, gl.VERTEX_SHADER, vsSource);
  const fs = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
  const program = gl.createProgram();
  gl.attachShader(program, vs);
  gl.attachShader(program, fs);
  gl.linkProgram(program);
  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
    console.error(gl.getProgramInfoLog(program));
  }
  return program;
}

// ---------- Inicialização ----------
const canvas = document.getElementById("glcanvas");
const gl = canvas.getContext("webgl");
if (!gl) { alert("WebGL não suportado"); }

// Programa
const program = createProgram(gl, vsSource, fsSource);
gl.useProgram(program);

// Localizações
const aPosition = gl.getAttribLocation(program, "aPosition");
const uColor = gl.getUniformLocation(program, "uColor");

const vertices = new Float32Array([

  // Petala direita
  0.1, 0.4,
  0.0, 0.3,
  0.1, 0.3,

  // Petala esquerda
  -0.1, 0.4,
  0.0, 0.3,
  -0.1, 0.3,

  // Caule
  0.0, 0.3,
  0.0, -0.6,

  // Folha
  -0.1, -0.4,
  0.0, -0.3,
  -0.1, -0.2,
]);

// Buffer
const vbo = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, vbo);
gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
gl.enableVertexAttribArray(aPosition);
gl.vertexAttribPointer(aPosition, 2, gl.FLOAT, false, 0, 0);

// ---------- Render ----------
gl.clearColor(0.1, 0.1, 0.1, 1);
gl.clear(gl.COLOR_BUFFER_BIT);

// Petala direita
gl.uniform3fv(uColor, [5.0, 0.0, 0.5]);
gl.drawArrays(gl.TRIANGLES, 0, 3);

// Petala esquerda
gl.uniform3fv(uColor, [5.0, 0.0, 0.5]);
gl.drawArrays(gl.TRIANGLES, 3, 3);

// Caule
gl.uniform3fv(uColor, [0.0, 1.0, 0.0]);
gl.drawArrays(gl.LINES, 6, 2);

// Folha
gl.uniform3fv(uColor, [0.0, 0.7, 0.0]);
gl.drawArrays(gl.TRIANGLES, 8, 3);

</script>
</body>
</html>



